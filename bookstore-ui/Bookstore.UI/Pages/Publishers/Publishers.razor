@page "/publishers"
@using Bookstore.Core.Models;

<style>
    .align-right {
        margin-right: auto;
        margin-left: 20px;
    }
</style>

@if (_isLoading)
{
    <p><em>Loading...</em></p>
}
else
{
    <MudTable Items="@_publishers" Hover="true" Bordered="false" Dense="false" Breakpoint="Breakpoint.Xs">
        <ToolBarContent>
            <MudText Typo="Typo.h6" Class="title">Publishers</MudText>
            <MudSpacer />
            <MudTextField 
                @bind-Value="_publishersNameFilter" 
                Placeholder="Search name..."
                Adornment="Adornment.Start" 
                AdornmentIcon="@Icons.Material.Filled.Search" 
                IconSize="Size.Small" 
                Class="mt-0"
                OnKeyDown="FilterPublishers"
                Immediate="true"
            />
            <MudButton
                Variant="Variant.Outlined"
                EndIcon="@Icons.Outlined.Add"
                Color="Color.Info"
                Size="Size.Medium"
                Class="align-right"
                OnClick="OpenAddDialog"
            >
                <span class="button-text">Add</span>
            </MudButton>
        </ToolBarContent>
        <HeaderContent>
            <MudTh>Nr</MudTh>
            <MudTh>Name</MudTh>
            <MudTh>Edit</MudTh>
            <MudTh>Delete</MudTh>
         </HeaderContent>
        <RowTemplate>
            <MudTd>@GetRowNumber(context)</MudTd>
            <MudTd DataLabel="Name">@context.Name</MudTd>
            <MudTd DataLabel="Edit">
                <MudIconButton
                    Icon="@Icons.Material.Outlined.Edit"
                    Variant="Variant.Text"
                    Color="Color.Info"
                    Size="Size.Small"
                    OnClick="@(async () => await OpenUpdateDialog(context))" />
            </MudTd>
            <MudTd DataLabel="Delete">
                <MudIconButton Icon="@Icons.Material.Outlined.Delete"
                    Variant="Variant.Text"
                    Color="Color.Error"
                    Size="Size.Small"
                    OnClick="@(async () => await OpenDeleteDialog(context))" />
            </MudTd>
        </RowTemplate>
    </MudTable>
}
